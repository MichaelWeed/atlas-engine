{
    "TemplateBody": "AWSTemplateFormatVersion: '2010-09-09'\nDescription: 'CloudFormation template to create AtlasEngineInteractions DynamoDB table with Global Secondary Index'\n\nResources:\n  AtlasEngineInteractionsTable:\n    Type: 'AWS::DynamoDB::Table'\n    Properties:\n      TableName: AtlasEngineInteractions\n      BillingMode: PAY_PER_REQUEST\n      AttributeDefinitions:\n        - AttributeName: PK\n          AttributeType: S\n        - AttributeName: SK\n          AttributeType: S\n        - AttributeName: ContactId\n          AttributeType: S\n      KeySchema:\n        - AttributeName: PK\n          KeyType: HASH\n        - AttributeName: SK\n          KeyType: RANGE\n      GlobalSecondaryIndexes:\n        - IndexName: ContactId-index\n          KeySchema:\n            - AttributeName: ContactId\n              KeyType: HASH\n          Projection:\n            ProjectionType: INCLUDE\n            NonKeyAttributes:\n              - PK\n              - SK\n              - StepFunctionTaskToken\n      Tags:\n        - Key: Environment\n          Value: Production\n        - Key: Application\n          Value: AtlasEngine\n\nOutputs:\n  TableName:\n    Description: 'Name of the DynamoDB table'\n    Value: !Ref AtlasEngineInteractionsTable\n    Export:\n      Name: !Sub '${AWS::StackName}-TableName'\n  \n  TableArn:\n    Description: 'ARN of the DynamoDB table'\n    Value: !GetAtt AtlasEngineInteractionsTable.Arn\n    Export:\n      Name: !Sub '${AWS::StackName}-TableArn'\n  \n  GlobalSecondaryIndexName:\n    Description: 'Name of the ContactId Global Secondary Index'\n    Value: ContactId-index\n    Export:\n      Name: !Sub '${AWS::StackName}-GSI-ContactId'\n",
    "StagesAvailable": [
        "Original",
        "Processed"
    ]
}
