{"Version": "2019-10-30", "StartAction": "Enable Recording", "Metadata": {"entryPointPosition": {"x": 40, "y": 40}, "ActionMetadata": {"02536ef8-ac74-4322-b459-9967f5fc2a0c": {"position": {"x": 1200, "y": 64}}, "f7c8f1a0-49c7-42cf-95c8-a651a947ca96": {"position": {"x": 648, "y": 400}}, "Enable Recording": {"position": {"x": 188, "y": 40}, "isFriendlyName": true}, "733d694f-6da2-4341-9041-726a47628f6b": {"position": {"x": 542.4, "y": 29.6}, "parameters": {"LexV2Bot": {"AliasArn": {"displayName": "PROD", "useLexBotDropdown": true, "lexV2BotName": "AtlasEngineBot"}}}, "dynamicMetadata": {"bargeInConfig": false, "sessionTimeout": false, "startTimeoutMs": false, "endTimeoutMs": false, "dynamicScenario": false}, "useLexBotDropdown": true, "lexV2BotName": "AtlasEngineBot", "lexV2BotAliasName": "PROD", "conditionMetadata": []}, "SetRetryCounter": {"position": {"x": 360, "y": 40}, "isFriendlyName": true}, "CheckRetryCount": {"position": {"x": 800, "y": 400}, "isFriendlyName": true, "conditionMetadata": [{"id": "retry-less-than-2", "operator": {"name": "NumberLessThan", "value": "NumberLessThan"}, "value": "2"}]}, "IncrementRetry": {"position": {"x": 648, "y": 550}, "isFriendlyName": true}, "FinalGoodbye": {"position": {"x": 1000, "y": 550}, "isFriendlyName": true}}, "Annotations": []}, "Actions": [{"Parameters": {}, "Identifier": "02536ef8-ac74-4322-b459-9967f5fc2a0c", "Type": "DisconnectParticipant", "Transitions": {}}, {"Parameters": {"Text": "Are you still there?"}, "Identifier": "f7c8f1a0-49c7-42cf-95c8-a651a947ca96", "Type": "MessageParticipant", "Transitions": {"NextAction": "CheckRetryCount", "Errors": [{"NextAction": "CheckRetryCount", "ErrorType": "NoMatchingError"}]}}, {"Parameters": {"RecordingBehavior": {"RecordedParticipants": ["Agent", "Customer"], "IVRRecordingBehavior": "Enabled"}, "AnalyticsBehavior": {"Enabled": "True", "AnalyticsLanguage": "en-US", "AnalyticsRedactionBehavior": "Disabled", "AnalyticsRedactionResults": "RedactedAndOriginal", "ChannelConfiguration": {"Chat": {"AnalyticsModes": []}, "Voice": {"AnalyticsModes": ["PostContact"]}}, "SentimentConfiguration": {"Enabled": "True"}}}, "Identifier": "Enable Recording", "Type": "UpdateContactRecordingBehavior", "Transitions": {"NextAction": "SetRetryCounter"}}, {"Parameters": {"Attributes": {"retryCount": {"Value": "0"}}}, "Identifier": "SetRetryCounter", "Type": "UpdateContactAttributes", "Transitions": {"NextAction": "733d694f-6da2-4341-9041-726a47628f6b"}}, {"Parameters": {"Text": "Hello", "LexV2Bot": {"AliasArn": "arn:aws:lex:us-west-2:<AWS_ACCOUNT_ID>:bot-alias/M4GK3H6ODQ/TGTX0J8EUX"}, "LexSessionAttributes": {"bargeInConfig": "{\"enableBargein\": true}", "sessionTimeout": "600", "startTimeoutMs": "12000", "endTimeoutMs": "3000", "interactionKey": "$.Attributes.interactionKey"}}, "Identifier": "733d694f-6da2-4341-9041-726a47628f6b", "Type": "ConnectParticipantWithLexBot", "Transitions": {"NextAction": "733d694f-6da2-4341-9041-726a47628f6b", "Conditions": [{"NextAction": "f7c8f1a0-49c7-42cf-95c8-a651a947ca96", "Condition": {"Operator": "Equals", "Operands": ["NoInput"]}}], "Errors": [{"NextAction": "02536ef8-ac74-4322-b459-9967f5fc2a0c", "ErrorType": "NoMatchingCondition"}]}}, {"Parameters": {"ComparisonValue": "$.Attributes.retryCount"}, "Identifier": "CheckRetryCount", "Type": "Compare", "Transitions": {"NextAction": "FinalGoodbye", "Conditions": [{"NextAction": "IncrementRetry", "Condition": {"Operator": "NumberLessThan", "Operands": ["2"]}}], "Errors": [{"NextAction": "FinalGoodbye", "ErrorType": "NoMatchingCondition"}]}}, {"Parameters": {"Attributes": {"retryCount": {"Value": "$.Attributes.retryCount", "Operator": "Add", "OperandValue": "1"}}}, "Identifier": "IncrementRetry", "Type": "UpdateContactAttributes", "Transitions": {"NextAction": "733d694f-6da2-4341-9041-726a47628f6b"}}, {"Parameters": {"Text": "Thanks for your time. Goodbye!"}, "Identifier": "FinalGoodbye", "Type": "MessageParticipant", "Transitions": {"NextAction": "02536ef8-ac74-4322-b459-9967f5fc2a0c", "Errors": [{"NextAction": "02536ef8-ac74-4322-b459-9967f5fc2a0c", "ErrorType": "NoMatchingError"}]}}]}
